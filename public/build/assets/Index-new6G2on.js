import{d as l,T as d,c as T,w as p,o as v,b as c,u as _,E as g}from"./app-BRjqicTi.js";import{_ as x}from"./AppLayout-Cq6-NHCf.js";import y from"./Sidebar-Oo3LJIAO.js";import S from"./Body-B8HJR1O1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./StatusToggle-CGg4Zo9o.js";const A={__name:"Index",props:{tasks:Array,status:Number},setup(n){const r=n,{notify:u}=g(),e=l(!1),a=l(null),s=d({name:"",value:"",status:r.status}),i=()=>{e.value?s.put(`/tasks/${a.value}`,{onSuccess:()=>{u({title:"Съобщение",text:"Успешно записахте промените!",type:"success"})}}):s.post("/tasks",{onSuccess:()=>{u({title:"Съобщение",text:"Успешно създадохте записа!",type:"success"})}})},m=t=>{s.name=t.name,s.value=t.value,s.status=t.status===0?1:0,a.value=t.id,e.value=!0,s.put(`/tasks/${t.id}`,{onSuccess:()=>{u({title:"Съобщение",text:"Успешно променихте статуса на задачата!",type:"success"})}})},f=t=>{s.name=t.name,s.value=t.value,s.status=t.status,a.value=t.id,e.value=!0},o=()=>{s.name="",s.value="",s.status=0,a.value=null,e.value=!1},k=t=>{confirm("Are you sure you want to delete this task?")&&(o(),s.delete(`/tasks/${t}`))};return(t,$)=>(v(),T(x,{title:"Dashboard",status:r.status},{default:p(()=>[c(y,{tasks:n.tasks,currentTaskId:a.value,onResetFormTask:o,onEditTask:f,onDeleteTask:k,onToggleTaskStatus:m},null,8,["tasks","currentTaskId"]),c(S,{formTask:_(s),isEditing:e.value,onSubmitTask:i,onResetFormTask:o},null,8,["formTask","isEditing"])]),_:1},8,["status"]))}};export{A as default};
